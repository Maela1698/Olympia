<div class="page-container">
  
  <div class="page-header">
    <div class="header-info">
      <h1 class="page-title">Gestion des Boutiques</h1>
      <p class="page-subtitle">Pilotez les commerces locataires de votre espace Olympia Mall.</p>
    </div>
    <div class="header-actions">
        <button routerLink="/admin/create-boutique" class="btn-primary">Ouvrir une Boutique</button>
    </div>
  </div>

  <div class="pro-card">
    <table class="pro-table">
      <thead>
        <tr>
          <th>Boutique</th>
          <th>Catégorie</th>
          <th>Emplacement</th>
          <th>Contact Gérant</th>
          <th class="text-right">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let b of boutiques">
          <td>
            <div class="boutique-info-cell">
              <img [src]="b.logo || 'assets/placeholder-shop.jpg'" class="avatar-img">
              <div>
                <div class="font-bold">{{ b.nom }}</div>
                <small class="text-muted">{{ b.horaires }}</small>
              </div>
            </div>
          </td>
          <td><span class="pill-category">{{ b.id_categorie?.nom }}</span></td>
          <td>
            <span class="status-badge libre">{{ b.id_box?.nom }}</span><br>
            <small class="text-muted">Étage {{ b.id_box?.etage }}</small>
          </td>
          <td>
            <div class="font-bold">{{ b.id_responsable?.name }} {{ b.id_responsable?.fname }}</div>
            <small class="text-muted">{{ b.id_responsable?.mail }}</small>
          </td>
          <td class="text-right actions-cell">
  <div class="table-actions">
    <a [routerLink]="['/admin/edit-boutique', b._id]" class="btn-sm btn-outline-edit" style="text-decoration: none;">
      <i class="fa-solid fa-pen-to-square"></i> Modifier
    </a>
    <button (click)="deleteBoutique(b._id)" class="btn-sm btn-outline-delete">
      <i class="fa-solid fa-trash"></i> Supprimer
    </button>
  </div>
</td>
        </tr>
        <tr *ngIf="boutiques.length === 0">
          <td colspan="5" class="empty-state">Aucune boutique ouverte pour le moment.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="toast-notification" [class.show]="toastMessage !== ''">
  {{ toastMessage }}
</div>