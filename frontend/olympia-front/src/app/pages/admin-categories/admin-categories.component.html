<div class="page-container">
  
  <div class="page-header">
    <div class="header-info">
      <h1 class="page-title">Rayons & Cat√©gories</h1>
      <p class="page-subtitle">Organisez les secteurs d'activit√© du centre commercial.</p>
    </div>
    <div class="header-actions">
      <button (click)="openCreateModal()" class="btn-primary">‚ûï Nouvelle Cat√©gorie</button>
    </div>
  </div>

  <div class="pro-card">
    <table class="pro-table">
      <thead>
        <tr>
          <th>Illustration</th>
          <th>Nom du rayon</th>
          <th class="text-right">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cat of categories">
          <td>
            <img [src]="cat.image || 'https://placehold.co/100'" class="avatar-img" alt="Cat√©gorie">
          </td>
          <td class="font-bold">{{ cat.nom }}</td>
          <td class="text-right actions-cell">
            <button (click)="startEdit(cat)" class="icon-btn edit" title="Modifier">‚úèÔ∏è</button>
            <button (click)="deleteCategory(cat._id)" class="icon-btn delete" title="Supprimer">üóëÔ∏è</button>
          </td>
        </tr>
        <tr *ngIf="categories.length === 0">
          <td colspan="3" class="empty-state">Aucune cat√©gorie cr√©√©e pour le moment.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="modal-overlay" *ngIf="showModal">
  <div class="modal-content">
    
    <div class="modal-header">
      <h3>{{ isEditMode ? 'Modifier la Cat√©gorie' : 'Cr√©er une Cat√©gorie' }}</h3>
      <button type="button" class="btn-close" (click)="closeModal()">‚úï</button>
    </div>

    <form (ngSubmit)="onSubmit()">
      <div class="modal-body">
        
        <div class="form-group">
          <label>Nom de la cat√©gorie</label>
          <input type="text" [(ngModel)]="formCat.nom" name="nom" required class="form-control" placeholder="ex: High-Tech & Informatique">
        </div>
        
        <div class="form-group">
          <label>URL de l'image (temporaire)</label>
          <input type="text" [(ngModel)]="formCat.image" name="image" class="form-control" placeholder="https://...">
          
          <div *ngIf="formCat.image" style="margin-top: 15px; text-align: center;">
            <p style="font-size: 0.8rem; color: #64748b; margin-bottom: 5px;">Aper√ßu :</p>
            <img [src]="formCat.image" style="width: 70px; height: 70px; object-fit: cover; border-radius: 12px; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
          </div>
        </div>

      </div>

      <div class="modal-footer">
        <button type="button" class="btn-secondary" (click)="closeModal()">Annuler</button>
        <button type="submit" class="btn-primary" [disabled]="!formCat.nom">üíæ Enregistrer</button>
      </div>
    </form>
    
  </div>
</div>

<div class="toast-notification" [class.show]="toastMessage !== ''">
  {{ toastMessage }}
</div>